name: Init Workflow

on:
  workflow_call:

jobs:
  init:
    name: Init
    runs-on: ubuntu-latest
    steps:
      - name: 🛑 Cancel Previous Runs
        uses: styfle/cancel-workflow-action@0.9.1

      - name: ⬇️ Checkout repo
        uses: actions/checkout@v3

      - name: ⎔ Setup node
        uses: actions/setup-node@v3
        with:
            node-version: 16
            cache: 'npm'
            cache-dependency-path: |
              package-lock.json
              packages/ci-cd-abcd/package-lock.json
              packages/ci-cd-pages/package-lock.json
              packages/ci-cd-test/package-lock.json


      - name: 📥 Download deps
        uses: bahmutov/npm-install@v1

      - name: 📥 Download deps monorepo
        uses: bahmutov/npm-install@v1
        with:
          working-directory: |
            packages/ci-cd-abcd
            packages/ci-cd-pages
            packages/ci-cd-test


